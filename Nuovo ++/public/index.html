
<!doctype html>
<html lang="it">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>COLPA MIA · Scuse On‑Demand</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <script defer src="/app.js"></script>
    <style>
      :root { --bg: #0b0c0f; --card: #12151a; --muted: #9aa4b2; --acc: #14b8a6; --txt: #e6edf3; }
      *{box-sizing:border-box} body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--txt)}
      .wrap{max-width:980px;margin:0 auto;padding:24px}
      header{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}
      .btn{padding:10px 14px;border-radius:14px;border:1px solid #2a2f36;background:#191d23;color:var(--txt);cursor:pointer}
      .btn.acc{background:var(--acc);color:#03110f;border:0}
      .card{background:var(--card);border:1px solid #242a32;border-radius:16px;padding:18px;margin-bottom:16px;box-shadow:0 6px 20px rgba(0,0,0,.25)}
      .row{display:flex;gap:16px;flex-wrap:wrap}
      .col{flex:1 1 300px}
      input,select{width:100%;padding:10px;border-radius:12px;border:1px solid #2a2f36;background:#0c0f13;color:var(--txt)}
      .range{width:100%}
      .muted{color:var(--muted)}
      .badge{display:inline-block;background:#0f1720;border:1px solid #2a2f36;border-radius:999px;padding:6px 10px;margin-right:8px}
      .tier{font-weight:600}
      .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
      .hidden{display:none}
      .footer{margin-top:32px;color:#7a8696;font-size:13px}
      a{color:var(--acc)}
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <div style="display:flex;align-items:center;gap:12px">
          <div style="font-weight:700;letter-spacing:0.5px">COLPA MIA</div>
          <div id="tier-chip" class="badge tier">TIER: —</div>
          <div class="badge">Saldo: <span id="balance">—</span> min</div>
        </div>
        <div>
          <button id="login-btn" class="btn">Accedi</button>
          <button id="logout-btn" class="btn hidden">Esci</button>
        </div>
      </header>

      <div class="card">
        <h2>Ordina una Scusa</h2>
        <div class="row">
          <div class="col">
            <label>Servizio</label>
            <select id="service">
              <option value="SCUSA_BASE" data-price="19">Scusa On‑Demand · €19</option>
              <option value="OUTSOURCING_EMOTIVO" data-price="59">Outsourcing Emotivo · €59</option>
            </select>
          </div>
          <div class="col">
            <label>Usa Minuti di Vita</label>
            <input id="redeem" type="range" class="range" min="0" max="0" step="15" value="0">
            <div class="muted">Riscatto: <span id="redeem-val">0</span> min ⇒ sconto €<span id="redeem-eur">0.00</span> (cap <span id="cap">—</span>%)</div>
          </div>
          <div class="col" style="display:flex;align-items:flex-end">
            <button id="checkout" class="btn acc" style="width:100%">Vai al pagamento</button>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="card">
            <h3>Wallet</h3>
            <div class="muted">Pending: <span id="pending">—</span> · Scadenze prossime: <span id="expiring">—</span></div>
            <div id="ledger"></div>
          </div>
        </div>
        <div class="col">
          <div class="card">
            <h3>Abbonamenti</h3>
            <div class="grid">
              <button class="btn" data-plan="plus">Plus · €9/m</button>
              <button class="btn" data-plan="pro">Pro · €29/m</button>
              <button class="btn" data-plan="elite">Elite · €79/m</button>
            </div>
            <div class="muted" style="margin-top:8px">Include crediti minuti mensili automatici.</div>
          </div>
          <div class="card">
            <h3>Referral</h3>
            <div class="muted">Condividi: <span id="ref-link">—</span></div>
          </div>
        </div>
      </div>

      <div class="footer">Stripe in modalità test finché non imposti le chiavi live. Identity gestisce login/registrazione. Leggi il README.</div>
    </div>
  </body>
</html>
